import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";import{o as r,c as k,a,w as t,b as n,d as s,r as l}from"./app.9f8cae59.js";const d={},m=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"let"),s(" server "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"./utils/server"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"let"),s(" router "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"./router"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"let"),s(" requestHandlers "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"./utils/requestHandlers"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"let"),s(" handle "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
handle`),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"/"'),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" requestHandlers"),n("span",{class:"token punctuation"},"."),s("start"),n("span",{class:"token punctuation"},";"),s(`
handle`),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"/start"'),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" requestHandlers"),n("span",{class:"token punctuation"},"."),s("start"),n("span",{class:"token punctuation"},";"),s(`
handle`),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"/upload"'),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" requestHandlers"),n("span",{class:"token punctuation"},"."),s("upload"),n("span",{class:"token punctuation"},";"),s(`

server`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),s("router"),n("span",{class:"token punctuation"},"."),s("route"),n("span",{class:"token punctuation"},","),s(" handle"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),v=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"let"),s(" http "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"http"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"let"),s(" url "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"url"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("route"),n("span",{class:"token punctuation"},","),s(" handle")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"onRequest"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("request"),n("span",{class:"token punctuation"},","),s(" response")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"var"),s(" postData "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"var"),s(" pathname "),n("span",{class:"token operator"},"="),s(" url"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"parse"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},"."),s("url"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("pathname"),n("span",{class:"token punctuation"},";"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Request for "'),s(),n("span",{class:"token operator"},"+"),s(" pathname "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'" received."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    request`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setEncoding"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"utf8"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    request`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addListener"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"data"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"postDataChunk"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      postData `),n("span",{class:"token operator"},"+="),s(" postDataChunk"),n("span",{class:"token punctuation"},";"),s(`
      console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},`"Received POST data chunk '"`),s(),n("span",{class:"token operator"},"+"),s(" postDataChunk "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},`"'."`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    request`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addListener"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"end"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token function"},"route"),n("span",{class:"token punctuation"},"("),s("handle"),n("span",{class:"token punctuation"},","),s(" pathname"),n("span",{class:"token punctuation"},","),s(" response"),n("span",{class:"token punctuation"},","),s(" postData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  http`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createServer"),n("span",{class:"token punctuation"},"("),s("onRequest"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"listen"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8888"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Server has started."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

exports`),n("span",{class:"token punctuation"},"."),s("start "),n("span",{class:"token operator"},"="),s(" start"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"let"),s(" exec "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"child_process"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("exec"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"let"),s(" querystring "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"querystring"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// \u5904\u7406POST\u8BF7\u6C42"),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("response"),n("span",{class:"token punctuation"},","),s(" postData")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},`"Request handler 'start' was called."`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"let"),s(" body "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},`
  <html>
    <head>
      <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    </head>
    <body>
      <form action="/upload" method="post">
        <textarea name="text" rows="20" cols="60"></textarea>
        <input type="submit" value="Submit text" />
      </form>
    </body>
  </html>;`),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`

  response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"writeHead"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"200"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string-property property"},'"Content-Type"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"text/html"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),s("body"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"end"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"upload"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("response"),n("span",{class:"token punctuation"},","),s(" postData")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},`"Request handler 'upload' was called."`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"writeHead"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"200"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string-property property"},'"Content-Type"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"text/plain"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},`"You've sent the text: "`),s(),n("span",{class:"token operator"},"+"),s(" querystring"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"parse"),n("span",{class:"token punctuation"},"("),s("postData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("text"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"end"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

exports`),n("span",{class:"token punctuation"},"."),s("start "),n("span",{class:"token operator"},"="),s(" start"),n("span",{class:"token punctuation"},";"),s(`
exports`),n("span",{class:"token punctuation"},"."),s("upload "),n("span",{class:"token operator"},"="),s(" upload"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),h=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"route"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("handle"),n("span",{class:"token punctuation"},","),s(" pathname"),n("span",{class:"token punctuation"},","),s(" response"),n("span",{class:"token punctuation"},","),s(" postData")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"About to route a request for "'),s(),n("span",{class:"token operator"},"+"),s(" pathname"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),s(" handle"),n("span",{class:"token punctuation"},"["),s("pathname"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},'"function"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    handle`),n("span",{class:"token punctuation"},"["),s("pathname"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),s("response"),n("span",{class:"token punctuation"},","),s(" postData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"No request handler found for "'),s(),n("span",{class:"token operator"},"+"),s(" pathname"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"writeHead"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"404"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string-property property"},'"Content-Type"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"text/plain"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"404 Not found"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"end"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
exports`),n("span",{class:"token punctuation"},"."),s("route "),n("span",{class:"token operator"},"="),s(" route"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),g=n("p",null,[n("img",{src:"https://oss.w2gd.top/blog/httpserver.gif",alt:"post\u8BF7\u6C42",loading:"lazy"})],-1),f=n("h2",{id:"\u53C2\u8003",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u53C2\u8003","aria-hidden":"true"},"#"),s(" \u53C2\u8003")],-1),_={href:"https://www.nodebeginner.org/index-zh-cn.html",target:"_blank",rel:"noopener noreferrer"},y=s("Node\u5165\u95E8"),w={href:"https://cloud.tencent.com/developer/article/1410703",target:"_blank",rel:"noopener noreferrer"},x=s("module.exports \u3001exports\u3001export\u3001export default\u7684\u533A\u522B"),q={href:"https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Asynchronous/Promises",target:"_blank",rel:"noopener noreferrer"},j=s("\u5982\u4F55\u4F7F\u7528 Promise");function T(C,D){const u=l("CodeTabs"),e=l("ExternalLinkIcon");return r(),k("div",null,[a(u,{data:[{title:"index.js"},{title:"server.js"},{title:"requestHandles.js"},{title:"router.js"}],"tab-id":"language"},{tab0:t(({title:o,value:c,isActive:p})=>[m]),tab1:t(({title:o,value:c,isActive:p})=>[v]),tab2:t(({title:o,value:c,isActive:p})=>[b]),tab3:t(({title:o,value:c,isActive:p})=>[h]),_:1},8,["data"]),g,f,n("ul",null,[n("li",null,[n("a",_,[y,a(e)])]),n("li",null,[n("a",w,[x,a(e)])]),n("li",null,[n("a",q,[j,a(e)])])])])}var A=i(d,[["render",T],["__file","HTTP_server.html.vue"]]);export{A as default};
