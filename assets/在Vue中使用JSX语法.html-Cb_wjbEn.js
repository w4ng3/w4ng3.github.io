import{_ as u}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as r,c as k,d as n,e as s,b as a,w as e,f as c}from"./app-gs2C4yoU.js";const d={},v=n("p",null,[s("渲染函数在代码易读性上比模版差很多，代码写起来很痛苦， 这就是为什么会有一个 "),n("a",{href:"https://github.com/vuejs/babel-plugin-jsx"},"Babel"),s(" 插件，用于在 Vue 中使用 JSX 语法，它可以让我们回到更接近于模板的语法上。")],-1),m=n("blockquote",null,[n("p",null,"naive-ui 组件库的源码就是使用 tsx 写的")],-1),g=n("h2",{id:"对比-template-和-jsx-tsx-的优缺点",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#对比-template-和-jsx-tsx-的优缺点","aria-hidden":"true"},"#"),s(" 对比 template 和 jsx/tsx 的优缺点")],-1),b={href:"https://www.zhihu.com/question/436260027/answer/1661092534",target:"_blank",rel:"noopener noreferrer"},h=c(`<div class="hint-container info"><p class="hint-container-title">template：</p><p><span class="pink">优点：</span>可读性高</p><p>基于 dom 结构，很容易就可以看清楚代码要表达的意图（当然，写的一窝粥的除外)<br> 通过 vue 的指令和语法，一眼就能确定逻辑在哪里</p><p><span class="blh">缺点：</span>不够灵活</p><p>也是一直被大家吐槽的点，过于笨重 SFC 享受不到 props 类型提示,受限于 SFC，组件在外部使用时 vscode 无法做出 props 的类型提示,这一点对于组件库来讲是个痛点</p></div><div class="hint-container tip"><p class="hint-container-title">jsx</p><p><span class="pink">优点：</span>灵活</p><p>可以利用 js 来表达各种各样的逻辑，十分灵活 可享受 props 类型提示 如果是用 tsx 编写的组件，用户是可以享受到 props 的类型提示的</p><p><span class="blh">缺点：</span>可读性差</p><p>这个其实也是过于灵活带来的后遗症，就是因为太灵活了，大家怎么写的都有，很容易出现坏味道<br> 要不就在 setup 中通过函数返回，要不就在 render 函数中实现。 但是如果你在 setup 中直接返回的话，其实是破坏了 setup 返回对象作为 view 和 model 层的接口，而且如果是 ref 类型的响应式对象的话，你还必须使用 .value ,享受不到结构 ref 了,你会发现你的代码可读性极差。</p><p>我更推荐在 render 中实现<br> 但是你调用的时候必须要加个 render(ctx), ctx 相当于是 this，还是不如在 template 中干净</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// setup 直接返回一个函数</span>
<span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 返回一个函数</span>
    <span class="token comment">// 如果是返回一个对象的话，这个对象其实可以看做 view 和 model 之间的接口层，但是返回一个函数的话，就破坏了</span>
    <span class="token comment">// 必须对 ref 类型的响应式对象使用 .value</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>count<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// render 中实现</span>
<span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> count <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 必须调用 ctx</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>ctx<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="jsx-简明语法" tabindex="-1"><a class="header-anchor" href="#jsx-简明语法" aria-hidden="true">#</a> JSX 简明语法</h2>`,3),x={href:"https://juejin.cn/post/7114063575122984973",target:"_blank",rel:"noopener noreferrer"},f=c(`<h2 id="demo-vite-vue-jsx" tabindex="-1"><a class="header-anchor" href="#demo-vite-vue-jsx" aria-hidden="true">#</a> Demo Vite + Vue + JSX</h2><figure><img src="https://riddler.oss-cn-shanghai.aliyuncs.com/blog/20220731000050.png" alt="demo-jsx" tabindex="0" loading="lazy"><figcaption>demo-jsx</figcaption></figure><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>pnpm add @vitejs/plugin-vue-jsx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),_=n("div",{class:"language-jsx line-numbers-mode","data-ext":"jsx"},[n("pre",{class:"language-jsx"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" defineComponent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"vue"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(" AnchoredHeading "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"./AnchoredHeading"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"defineComponent"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"render"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),s(`
      `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token plain-text"},`
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("p")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token plain-text"},"月光照耀在落叶上"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("p")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token plain-text"},`
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("h2")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token plain-text"},"在墓穴的周围"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("h2")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token plain-text"},`
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"AnchoredHeading")]),s(),n("span",{class:"token attr-name"},"level"),n("span",{class:"token script language-javascript"},[n("span",{class:"token script-punctuation punctuation"},"="),n("span",{class:"token punctuation"},"{"),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token plain-text"},`
          `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("span")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token plain-text"},"一条条相互交叉"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("span")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token plain-text"},` 的线
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),n("span",{class:"token class-name"},"AnchoredHeading")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token plain-text"},`
      `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</")]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),j=n("div",{class:"language-vue line-numbers-mode","data-ext":"vue"},[n("pre",{class:"language-vue"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("Bar")]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("hr")]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("JsxComp")]),s(),n("span",{class:"token punctuation"},"/>")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"setup"),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
`),n("span",{class:"token keyword"},"import"),s(" AnchoredHeading "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"../components/AnchoredHeading"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" h "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"vue"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// JSX组件"),s(`
`),n("span",{class:"token keyword"},"import"),s(" JsxComp "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"../components/JsxComp"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// 原本的渲染函数组件"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"Bar"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(`
  `),n("span",{class:"token function"},"h"),n("span",{class:"token punctuation"},"("),s("AnchoredHeading"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"level"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token function"},"h"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"span"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"Hello"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"-world!"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" defineConfig "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"vite"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(" vue "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@vitejs/plugin-vue"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(" vueJsx "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@vitejs/plugin-vue-jsx"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// https://vitejs.dev/config/"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"defineConfig"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token function"},"vue"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"refTransform"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"vueJsx"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=c(`<h2 id="demo-在-setup-surge-中使用-jsx" tabindex="-1"><a class="header-anchor" href="#demo-在-setup-surge-中使用-jsx" aria-hidden="true">#</a> Demo 在 setup surge 中使用 jsx</h2><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Jsxtest</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> vueSvg <span class="token keyword">from</span> <span class="token string">&quot;../assets/vue.svg&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Jsxtest <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* 一张图片 */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>vueSvg<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">&quot;Vue logo&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h2>`,3),J={href:"https://juejin.cn/post/7114063575122984973",target:"_blank",rel:"noopener noreferrer"},C={href:"https://www.zhihu.com/question/436260027/answer/1661092534",target:"_blank",rel:"noopener noreferrer"},V={href:"https://github.com/vitejs/vite/tree/main/packages/plugin-vue-jsx",target:"_blank",rel:"noopener noreferrer"},A={href:"https://cn.vitejs.dev/plugins/",target:"_blank",rel:"noopener noreferrer"};function S(q,H){const t=l("ExternalLinkIcon"),i=l("CodeTabs");return r(),k("div",null,[v,m,g,n("p",null,[s("来源："),n("a",b,[s("为什么 Vue3 的组件库都在使用 jsx/tsx？ - 阿崔 cxr 的回答 - 知乎 "),a(t)])]),h,n("p",null,[n("a",x,[s("《Vue3 中使用 JSX 简明语法》"),a(t)])]),f,a(i,{id:"60",data:[{id:"JsxComp.jsx"},{id:"Hello.vue"},{id:"vite.config.js"}],"tab-id":"language"},{title0:e(({value:p,isActive:o})=>[s("JsxComp.jsx")]),title1:e(({value:p,isActive:o})=>[s("Hello.vue")]),title2:e(({value:p,isActive:o})=>[s("vite.config.js")]),tab0:e(({value:p,isActive:o})=>[_]),tab1:e(({value:p,isActive:o})=>[j]),tab2:e(({value:p,isActive:o})=>[w]),_:1}),y,n("p",null,[n("a",J,[s("《Vue3 中使用 JSX 简明语法》"),a(t)])]),n("p",null,[n("a",C,[s("为什么 Vue3 的组件库都在使用 jsx/tsx？ - 阿崔 cxr 的回答 - 知乎 "),a(t)])]),n("p",null,[n("a",V,[s("github:@vitejs/plugin-vue-jsx"),a(t)])]),n("p",null,[n("a",A,[s("vite 官方插件"),a(t)])])])}const F=u(d,[["render",S],["__file","在Vue中使用JSX语法.html.vue"]]);export{F as default};
